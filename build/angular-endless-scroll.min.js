!function(){"use strict";angular.module("davidchin.endlessScroll",[])}(),function(){"use strict";angular.module("davidchin.endlessScroll").directive("endlessScroll",["EndlessScroll",function(a){return{restrict:"EA",scope:!0,controller:["$scope","$element","$attrs",function(b,c,d){var e=new a(c,{next:b.$eval(d.endlessScroll||d.next)});return b.$on("$destroy",function(){e.unwatch()}),e}]}}])}(),function(){"use strict";angular.module("davidchin.endlessScroll").factory("EndlessScroll",["$window","$timeout",function(a,b){function c(a,c){var d;return function(){d&&b.cancel(d),d=b(a,c),d.then(function(){d=void 0})}}var d=function(b,c){this.windowElement=$(a),this.element=$(b),this.options=angular.extend({},this.defaultOptions,c),this.dimension={window:{},element:{}},this.watch()};return d.prototype.defaultOptions={offset:-100},d.prototype.next=function(){return angular.isFunction(this.options.next)?this.options.next.call(this):void 0},d.prototype.previous=function(){return angular.isFunction(this.options.previous)?this.options.previous.call(this):void 0},d.prototype.pause=function(){},d.prototype.watch=function(){this._onScroll=c(angular.bind(this,this.update),100),this.windowElement.on("scroll",this._onScroll)},d.prototype.unwatch=function(){angular.isFunction(this._onScroll)&&this.windowElement.off("scroll",this._onScroll)},d.prototype.update=function(){this.dimension.window.height=this.windowElement.height(),this.dimension.window.top=this.windowElement.scrollTop(),this.dimension.window.bottom=this.dimension.window.top+this.dimension.window.height,this.dimension.element.height=this.element.outerHeight(),this.dimension.element.top=this.element.offset().top,this.dimension.element.bottom=this.dimension.element.top+this.dimension.element.height,this.dimension.element.bottom+this.options.offset<=this.dimension.window.bottom&&this.next(),this._clean()},d.prototype._clean=function(){var a=this;this.element.children().each(function(b,c){c=$(c);var d=c.offset(),e=c.outerHeight(),f=d.top,g=d.top+e;c.css(g<a.dimension.window.top||f>a.dimension.window.bottom?{visibility:"hidden",opacity:0}:{visibility:"",opacity:""})})},d}])}();